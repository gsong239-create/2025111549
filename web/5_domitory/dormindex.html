<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>여대괴담-기숙사</title>
    <style>
        
        body, html {
            margin: 0;
            padding: 0;
            background-color: black;
            color: white;
            font-family: monospace, sans-serif;
            overflow: hidden; 
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center; 
        }

        
        .page-container {
            position: relative; 
            display: flex;
            max-width: 1200px; 
            width: 90vw; 
            height: 90vh; 
            margin: auto;
            align-items: flex-start;
            justify-content: space-between;
            padding: 20px;
            opacity: 1; 
            transition: opacity 0.5s;
        }
        
        
        #time-display-area {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 50; 
            font-size: 14px;
            color: white; /* 흰색으로 변경 */
            text-align: right;
            line-height: 1.4;
        }
        
        
        .time-highlight {
            font-size: 18px;
            font-weight: bold;
        }

        
        #start-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100; 
            background-color: rgba(0, 0, 0, 0.95);
            
            
            background-image: url('dorm_kijun.png');
            background-size: contain; 
            background-repeat: no-repeat;
            background-position: center;
            
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        #start-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none; 
        }

        .start-text {
            color: darkred;
            font-size: 32px;
            font-weight: bold;
            text-shadow: 0 0 10px darkred;
            animation: blink 1s step-start infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

       
        .left-column {
            display: flex;
            flex-direction: column;
            width: 30%; 
            flex-shrink: 0;
        }

        .left-image-box {
            position: relative;
            width: 100%; 
            height: 35vh; 
            overflow: hidden;
            border: 3px solid transparent; 
            cursor: pointer;
        }
        
        .left-image-box img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; 
            display: block;
        }

        
        .image-box.selected {
             border-color: red !important;
        }
        
        
        .cctv-label-area {
            font-size: 20px;
            font-weight: bold;
            color: white;
            padding: 15px 0 10px 0;
            flex-shrink: 0;
        }

        .document-area {
            font-size: 14px;
            line-height: 1.6;
            color: #ccc;
            flex-shrink: 0;
            max-height: 40vh; 
            overflow-y: auto; 
        }

       
        .center-reference {
            flex-shrink: 0;
            width: 15%;
            height: 100%; 
            background-image: url('dorm_kijun.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            z-index: 1;
            margin: 0 5%; 
        }

        .right-column {
            display: flex;
            flex-direction: column;
            width: 35%;
            flex-shrink: 0;
        }

        .right-image-box {
            position: relative;
            width: 100%;
            height: 60vh; 
            overflow: hidden;
            background-color: #1a1a1a;
            margin-top: 150px; 
            border: 3px solid transparent; 
            cursor: pointer;
        }
        
        .right-image-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
      
        #next-button-container {
            position: absolute;
            bottom: 30px;
            right: 30px;
            z-index: 10;
        }
        
        .next-button {
            padding: 10px 20px;
            background-color: darkred;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }

    </style>
</head>
<body>
    
    <audio id="bgm_main" src="../0_homepage/[Track 07] Horror Sound Effect.wav" loop autoplay></audio>

    <audio id="bgm_stairs" src="stairs 10.wav"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audioMain = document.getElementById('bgm_main');
            const audioStairs = document.getElementById('bgm_stairs');
            
            
            audioMain.volume = 0.5;
            audioStairs.volume = 0.8; 

            
            audioMain.play().catch(e => {
                console.log("Main BGM blocked. Waiting for user interaction.");
            });

            
            document.addEventListener('click', function attemptPlay() {
                // 메인 BGM 재생 시도
                audioMain.play().catch(e => {});

                
                audioStairs.play().catch(e => {});

                if (!audioMain.paused && !audioStairs.paused) {
                    document.removeEventListener('click', attemptPlay);
                    console.log("Both audios successfully started by user click.");
                }
            }, { once: true });
        });
    </script>
    <div id="start-overlay">
        <div class="start-text">접근하려면 클릭하세요</div>
    </div>

    <div class="page-container" id="main-content">
        
        <div id="time-display-area">
            <div id="current-time"></div>
            <div id="access-time"></div>
        </div>

        <div class="left-column">
            <div class="left-image-box image-box" id="left-image-clickable">
                <img src="dorm_l.png" alt="기숙사 계단 왼쪽 부분">
            </div>
            
            <div class="cctv-label-area">
                CAMERA 05
            </div>
            <div class="cctv-label-area" id="cctv-location">
                CCTV 위치장소 : 기숙사
            </div>

            <div class="document-area">
                <p id="document-content">
                    
                </p>
            </div>
        </div>

        <div class="center-reference">
        </div>

        <div class="right-column">
            <div class="right-image-box image-box" id="right-image-clickable">
                <img src="dorm_r.png" alt="기숙사 계단 오른쪽 부분">
            </div>
        </div>
        
    </div>
    
    <div id="next-button-container"></div>

    <script>
        const startOverlay = document.getElementById('start-overlay');
        const leftImageClickable = document.getElementById('left-image-clickable');
        const rightImageClickable = document.getElementById('right-image-clickable');
        const documentContent = document.getElementById('document-content');
        const nextButtonContainer = document.getElementById('next-button-container');

        const defaultDoc = `양 옆의 이미지를 클릭하여 '특수 비공식 문서' 내용을 확인하세요.`;
        
        const leftDoc = `
            <p>특수 비공식 문서: 기숙사는 서울여대 캠퍼스 북쪽에 위치해있다. 기숙사의 복도는 끝없이 이어지는 듯 길고 어둡다. 새벽에 복도에 나가보면 비상구의 붉은 불빛만이 유일한 이정표이다. 이 침묵을 깨고 어디선가 규칙적인 '띠잉!' 소리가 들린다. 이는 공동 주방의 전자레인지 소리일 수도 있지만, 너무나 집요하고 반복적이어서 다른 무언가를 데우는 소리처럼 느껴진다. 새벽 3시 이후, 이 소리가 멈추기를 기다려야 한다.</p>
        `;
        
        const rightDoc = `
            <p>특수 비공식 문서: 기숙사는 수많은 학생들의 에너지가 모이는 곳이다. 이 계단은 자정이 지나면 발걸음이 거의 끊기지만, 가끔 자정에 희미한 발소리나 속삭임이 들린다. 또한 가장 소름 끼치는 것은, 새벽에 복도 끝에서 갑작스럽게 터져 나오는 '날카로운 비명'이다. 이는 친구에게 장난치는 소리일 수도 있지만, 그 소리의 톤과 길이가 너무 길어서 단순한 장난으로는 여겨지지 않는다. 그 비명이 들리면 절대 문을 열어서는 안 된다.</p>
        `;
        
        let leftViewed = false;
        let rightViewed = false;
        
        
        const accessTime = new Date();
        
        function formatDateTime(date, isAccessTime = false) {
            const dateStr = date.toLocaleDateString('en-US', {
                month: 'short', day: '2-digit', year: 'numeric'
            });
            const dayStr = date.toLocaleDateString('en-US', { weekday: 'short' });
            
            const hours = date.getHours();
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');
            
            
            const hourStr = String(hours).padStart(2, '0');

            if (isAccessTime) {
                
                return `${dayStr}, ${dateStr} - ${hourStr}:${minutes}:${seconds}`;
            } else {
                
                return `${dayStr}, ${dateStr} - ${hourStr}:<span class="time-highlight">${minutes}:${seconds}</span>`;
            }
        }
        
        function updateClock() {
            const now = new Date();
            document.getElementById('current-time').innerHTML = `CURRENT TIME: ${formatDateTime(now, false)}`;
        }
        
        
        document.getElementById('access-time').innerHTML = `ACCESS TIME: ${formatDateTime(accessTime, true)}`;
        
       
        setInterval(updateClock, 1000);
        updateClock(); 
        
     
        documentContent.innerHTML = defaultDoc;

        
        startOverlay.addEventListener('click', () => {
            
            startOverlay.classList.add('hidden');

          
            const audio = document.getElementById('bgm_main');
            audio.play().catch(e => {
                console.log("Play attempt failed after overlay click:", e);
            });
           
        });

      
        function updateContent(doc, selectedElement) {
            documentContent.innerHTML = doc;
            
          
            leftImageClickable.classList.remove('selected');
            rightImageClickable.classList.remove('selected');
            
            
            selectedElement.classList.add('selected');
        }

        leftImageClickable.addEventListener('click', () => {
            
            if(startOverlay.classList.contains('hidden')) {
                updateContent(leftDoc, leftImageClickable);
                leftViewed = true;
                checkAllViewed();
            }
        });

        rightImageClickable.addEventListener('click', () => {
             
            if(startOverlay.classList.contains('hidden')) {
                updateContent(rightDoc, rightImageClickable);
                rightViewed = true;
                checkAllViewed();
            }
        });

        function checkAllViewed() {
            if (leftViewed && rightViewed) {
                if (!document.querySelector('.next-button')) {
                    const nextButton = document.createElement('button');
                    nextButton.textContent = '다음 공간으로 이동';
                    nextButton.classList.add('next-button');
                    
                    nextButtonContainer.appendChild(nextButton);
                    
                      nextButton.addEventListener('click', () => {
                       
                        const audioStairs = document.getElementById('bgm_stairs');
                        audioStairs.pause();
                        audioStairs.currentTime = 0;

                        window.location.href = '../6_final/finalindex.html';                    });
                }
            }
        }
    </script>

</body>
</html>