<!DOCTYPE html>
<html>
<head>
    <title>Hidden Audio Player</title>
</head>
<body>
    <audio id="background-audio" loop autoplay>
        <source src="[Track 07] Horror Sound Effect.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <script>
        const audio = document.getElementById('background-audio');

        // 브라우저의 자동 재생 정책 우회를 위한 로직
        // IFrame이 로드된 후, 재생을 시도하며 실패 시 클릭 이벤트를 기다림
        function tryPlay() {
            const playPromise = audio.play();

            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    // 자동 재생이 막힌 경우 (사용자 상호작용 필요)
                    console.log("Audio playback blocked. Waiting for user interaction.");
                    
                    // 최상위 문서(부모 창)에서 발생하는 모든 클릭 이벤트를 감지하여 재생 시도
                    window.parent.document.addEventListener('click', () => {
                        audio.play().then(() => {
                            console.log("Audio resumed by user click.");
                        }).catch(e => {
                            console.log("Audio resume failed:", e);
                        });
                    }, { once: true }); // 한 번만 실행되도록 설정
                });
            }
        }

        // 1. IFrame이 완전히 로드된 후 재생 시도
        window.onload = tryPlay;
        
        // 2. 다른 페이지에서 이 IFrame으로 돌아왔을 때 재생 상태 유지 (새로고침 방지)
        // 이 IFrame은 페이지 전환 시 새로고침 되지 않으므로, 사실상 tryPlay()만으로 충분함.
    </script>
</body>
</html>